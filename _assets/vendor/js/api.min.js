function BCISearch(e){if(this&&this instanceof BCISearch){if(!e)throw new Error('BCI Error: BCISearch parameter must be an object (example: {pid: "1234", query: "rent a car", count: 4})');if(!e.pid)throw new Error('BCI Error: "pid" key is not present in BCISearch parameter object');var r=encodeURIComponent(e.pid);if(!e.query)throw new Error('BCI Error: "query" key is not present in BCISearch parameter object');var t=encodeURIComponent(e.query);if(!parseInt(e.count))throw new Error('BCI Error: "count" must be a positive number in BCISearch parameter object');var n=parseInt(e.count),a=!1;e.subid&&parseInt(e.subid)!=e.subid?console.warn('BCI Warning: "subid" key is not a number, assuming no subid'):a=parseInt(e.subid);var i=!1,o="";a&&(o="&subid="+a);var s="?post_type=product&noamz=1&gdn="+r+o+"&num="+n+"&s="+t;return this.getResults=function(a){if(i)return console.error("BCI Error: getResults may be called only once for an instance of BCISearch"),!1;i=!0;var e=document.createElement("iframe");e.setAttribute("style","display:none!important"),e.src="https://yourfirstcheapshop.com/xastarter.html"+s;var o=!1;window.addEventListener("message",function(e){if(e&&e.data){var r="xAdsBCIfrIResults=";if(0==e.data.indexOf(r)){var t=[];try{t=JSON.parse(e.data.replace(r,""))}catch(e){}if(o)return;if(o=!0,t&&t.length)for(var n=0;n<t.length;n++)t[n].pixelUrl&&delete t[n].pixelUrl,t[n].link&&(t[n].link="https://yourfirstcheapshop.com/xa/click.html"+s+"&url="+encodeURIComponent(t[n].link));a(t)}}});var r=function(){document.body.appendChild(e)};"complete"==document.readyState||"interactive"==document.readyState?r():document.addEventListener("DOMContentLoaded",r,!1)},!0}console.error('BCI Error: BCISearch is a class function and must be created with operator "new"')}
